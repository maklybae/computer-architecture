# –û—Ç—á–µ—Ç –ø–æ –î–ó #5

## –ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª–∞ —á–µ—Ä–µ–∑ —Ü–∏–∫–ª

–ü–æ–ª–Ω—ã–π –∫–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω ü§ú[—Ç—É—Ç](factorial_loop.asm)ü§õ

–°–∫—Ä–∏–Ω—à–æ—Ç —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã:

![screenshot](static/image1.png)

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è —è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é

```
check_overflow:
	# check overflow for a0 * a1; if (overflow) return 0;
	mul t0, a0, a1
	div t1, t0, a0
	
	bne t1 a1 check_overflow_true
	li a0 0
	ret
check_overflow_true:
	li a0 1
	ret
```

–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞, –ø—Ä–µ—Ä—ã–≤–∞–ª —Ü–∏–∫–ª –∏–ª–∏ —Å—á–∏—Ç–∞–ª —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ $n$.

–¢–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç `main` –ø—Ä–æ–≥—Ä–∞–º–º—ã, –≤—ã–∑—ã–≤–∞—é—â–∏–π –ª–∏—à—å —Ñ—É–Ω–∫—Ü–∏—é –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞:

```
main:
	# Print text
	la 	a0, s_result
	li 	a7, 4
	ecall
	
	# func call
	jal factorial_maxarg
	
	# Print result
    li a7, 1
    ecall
    # Exit
    li a7, 10
    ecall
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª–∞ —á–µ—Ä–µ–∑ —Ä–µ–∫—É—Ä—Å–∏—é

–ü–æ–ª–Ω—ã–π –∫–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω ü§ú[—Ç—É—Ç](factorial_rec.asm)ü§õ

–ò–∑ –ø—Ä–æ—à–ª–æ–π –∑–∞–¥–∞—á–∏ –≤–æ–∑—å–º–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ.

–°–∞–º–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `factorial_maxarg` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ–≥–ª–∞—Å–Ω–æ —ç—Ç–æ–º—É –ø—Å–µ–≤–¥–æ–∫–æ–¥—É:

```c
int factorial_maxarg(cur, res):
	inc_cur = cur + 1;
	if (check_overflow(inc_cur, res)) return cur;
	res *= inc_cur;
	return factorial_maxarg(inc_cur, res);
```

–¢—É—Ç `cur` –∏ `res` —Ç–∞–∫–∏–µ, —á—Ç–æ `cur! = res`.

–¢–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç `main`:

```
main:
	# Print text
	la 	a0, s_result
	li 	a7, 4
	ecall
	
	# func call
	li a0, 1
	li a1, 1
	jal factorial_maxarg
	
	# Print result
    li a7, 1
    ecall
    # Exit
    li a7, 10
    ecall
```